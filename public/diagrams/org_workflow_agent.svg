<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="560" viewBox="0 0 1200 560" role="img" aria-label="Org-Specific Workflow Agent — Dark (Clean Labels + Legend)">
  <!-- Background -->
  <rect x="0" y="0" width="1200" height="560" fill="#0b1220"/>

  <!-- Defs -->
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 z" fill="#7dc4ff"/>
    </marker>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="1.2" stdDeviation="2" flood-color="#000000" flood-opacity="0.35"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="600" y="48" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="22" fill="#e5eefc" font-weight="600">
    Org-Specific Workflow Agent
  </text>

  <!-- Developer Prompt -->
  <g filter="url(#softShadow)">
    <rect x="120" y="70" rx="14" ry="14" width="260" height="84" fill="#1e2a3c" stroke="#253246" stroke-width="1.2"/>
    <text x="250" y="112" text-anchor="middle" dominant-baseline="middle"
          font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" fill="#e5eefc">Developer Prompt</text>
  </g>
  <line x1="250" y1="154" x2="250" y2="220" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Select Tool (Agent decides) -->
  <g filter="url(#softShadow)">
    <rect x="120" y="220" rx="14" ry="14" width="260" height="108" fill="#1e2a3c" stroke="#253246" stroke-width="1.2"/>
    <text x="250" y="264" text-anchor="middle" dominant-baseline="middle"
          font-family="Inter,system-ui,Segoe UI,Arial" font-size="20" fill="#e5eefc">Select Tool</text>
    <text x="250" y="292" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">
      (Agent chooses ONE tool)
    </text>
  </g>

  <!-- Fan-out from Select Tool -->
  <line x1="380" y1="274" x2="460" y2="170" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="380" y1="274" x2="460" y2="274" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="380" y1="274" x2="460" y2="378" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Summarize (RAG inside) -->
  <g filter="url(#softShadow)">
    <rect x="460" y="130" rx="14" ry="14" width="280" height="88" fill="#2b2a5a" stroke="#253246" stroke-width="1.2"/>
    <text x="600" y="164" text-anchor="middle" dominant-baseline="middle"
          font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" fill="#e5eefc">Summarize (RAG inside)</text>
    <text x="600" y="192" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="12" fill="#c6d3ee">
      retrieve → rerank → synthesize
    </text>
  </g>

  <!-- Find Owner -->
  <g filter="url(#softShadow)">
    <rect x="460" y="234" rx="14" ry="14" width="280" height="88" fill="#2b2a5a" stroke="#253246" stroke-width="1.2"/>
    <text x="600" y="268" text-anchor="middle" dominant-baseline="middle"
          font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" fill="#e5eefc">Find Owner</text>
    <text x="600" y="296" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="12" fill="#c6d3ee">
      deterministic function / service
    </text>
  </g>

  <!-- Compose Update -->
  <g filter="url(#softShadow)">
    <rect x="460" y="338" rx="14" ry="14" width="280" height="88" fill="#2b2a5a" stroke="#253246" stroke-width="1.2"/>
    <text x="600" y="372" text-anchor="middle" dominant-baseline="middle"
          font-family="Inter,system-ui,Segoe UI,Arial" font-size="18" fill="#e5eefc">Compose Update</text>
    <text x="600" y="400" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="12" fill="#c6d3ee">
      deterministic function / service
    </text>
  </g>

  <!-- Arrows to joiner -->
  <line x1="740" y1="174" x2="810" y2="238" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="740" y1="278" x2="810" y2="278" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="740" y1="382" x2="810" y2="318" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Joiner hub -->
  <g filter="url(#softShadow)">
    <rect x="810" y="238" rx="14" ry="14" width="42" height="80" fill="#1e2a3c" stroke="#253246" stroke-width="1.2"/>
  </g>

  <!-- Structured Output -->
  <line x1="852" y1="278" x2="910" y2="278" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <g filter="url(#softShadow)">
    <rect x="910" y="226" rx="14" ry="14" width="300" height="104" fill="#0f4d3f" stroke="#253246" stroke-width="1.2"/>
    <text x="1060" y="266" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="20" fill="#e5eefc">Structured Output</text>
    <text x="1060" y="294" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="14" fill="#c6d3ee">(links • owners • risks)</text>
  </g>

  <!-- Clarifying captions -->
  <text x="250" y="340" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="12" fill="#c6d3ee">
    Agent = LLM decision-making (selects a single tool)
  </text>
  <text x="600" y="444" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="12" fill="#c6d3ee">
    Boxes = tools/services (deterministic surfaces; RAG allowed inside)
  </text>

  <!-- Legend (expanded box so text fits) -->
  <g aria-label="Legend">
    <!-- expanded width + height -->
    <rect x="320" y="470" rx="8" ry="8" width="620" height="72" fill="none" stroke="#253246" stroke-width="1"/>
    <!-- Agent/Router -->
    <rect x="340" y="490" width="18" height="14" rx="4" ry="4" fill="#1e2a3c" stroke="#253246" stroke-width="1"/>
    <text x="366" y="501" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">Agent / Router / Prompt</text>
    <!-- Tools (may use RAG/LLM) -->
    <rect x="540" y="490" width="18" height="14" rx="4" ry="4" fill="#2b2a5a" stroke="#253246" stroke-width="1"/>
    <text x="566" y="501" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">Tool (may use RAG/LLM)</text>
    <!-- Output envelope -->
    <rect x="740" y="490" width="18" height="14" rx="4" ry="4" fill="#0f4d3f" stroke="#253246" stroke-width="1"/>
    <text x="766" y="501" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">Structured Output</text>
  </g>
</svg>
