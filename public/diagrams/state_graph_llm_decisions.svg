<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="560" viewBox="0 0 1000 560" role="img" aria-label="From State Machines to State Graphs: Where LLMs Decide (Compact)">
  <!-- Background -->
  <rect x="0" y="0" width="1000" height="560" fill="#0b1220"/>

  <!-- Defs -->
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 z" fill="#7dc4ff"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="1.2" stdDeviation="2" flood-color="#000" flood-opacity="0.35"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="500" y="36" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="20" fill="#e5eefc" font-weight="600">
    From State Machines to State Graphs: Where LLMs Decide
  </text>

  <!-- ===== LEFT: Familiar Model (condensed) ===== -->
  <text x="175" y="78" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">State Machines / Step Functions</text>

  <g filter="url(#shadow)">
    <rect x="70" y="98" rx="12" ry="12" width="210" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="175" y="130" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">States + Transitions</text>
  </g>
  <line x1="175" y1="162" x2="175" y2="202" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <g filter="url(#shadow)">
    <rect x="70" y="202" rx="12" ry="12" width="210" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="175" y="234" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Deterministic Guards</text>
  </g>
  <line x1="175" y1="266" x2="175" y2="306" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <g filter="url(#shadow)">
    <rect x="70" y="306" rx="12" ry="12" width="210" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="175" y="338" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">External Tasks</text>
  </g>
  <line x1="175" y1="370" x2="175" y2="410" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <g filter="url(#shadow)">
    <rect x="70" y="410" rx="12" ry="12" width="210" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="175" y="442" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Retries / Timeouts</text>
  </g>

  <!-- ===== RIGHT: State Graphs with LLM/Agents ===== -->
  <text x="745" y="78" text-anchor="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">State Graphs with LLM/Agents</text>

  <!-- Ingest Prompt -->
  <g filter="url(#shadow)">
    <rect x="600" y="98" rx="12" ry="12" width="220" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="710" y="130" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Ingest Prompt</text>
  </g>
  <line x1="710" y1="162" x2="710" y2="202" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Intent Classifier (LLM) -->
  <g filter="url(#shadow)">
    <rect x="600" y="202" rx="12" ry="12" width="220" height="64" fill="#2b2a5a" stroke="#253246" stroke-width="1.1"/>
    <text x="710" y="234" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Intent Classifier (LLM)</text>
  </g>
  <line x1="710" y1="266" x2="710" y2="306" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Guarded Router -->
  <g filter="url(#shadow)">
    <rect x="600" y="306" rx="12" ry="12" width="220" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="710" y="338" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Guarded Router</text>
  </g>

  <!-- Vertical branch down to RAG and Workflow BELOW the router -->
  <!-- Down stem from router -->
  <line x1="710" y1="370" x2="710" y2="400" stroke="#7dc4ff" stroke-width="2"/>
  <!-- Split to left and right -->
  <path d="M 710 400 C 710 410, 685 420, 660 420" fill="none" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M 710 400 C 710 410, 735 420, 760 420" fill="none" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Targets BELOW the router -->
  <g filter="url(#shadow)">
    <rect x="440" y="388" rx="12" ry="12" width="220" height="64" fill="#2b2a5a" stroke="#253246" stroke-width="1.1"/>
    <text x="550" y="420" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">RAG Node (LLM + KB)</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="760" y="388" rx="12" ry="12" width="220" height="64" fill="#1e2a3c" stroke="#253246" stroke-width="1.1"/>
    <text x="870" y="420" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Workflow Tool Node</text>
  </g>

  <!-- Human-in-the-Loop Gate BELOW the workflow node -->
  <line x1="870" y1="452" x2="870" y2="500" stroke="#7dc4ff" stroke-width="2" marker-end="url(#arrow)"/>
  <g filter="url(#shadow)">
    <rect x="760" y="500" rx="12" ry="12" width="220" height="64" fill="#0f4d3f" stroke="#253246" stroke-width="1.1"/>
    <text x="870" y="532" text-anchor="middle" dominant-baseline="middle" font-family="Inter,system-ui,Segoe UI,Arial" font-size="16" fill="#e5eefc">Human-in-the-Loop Gate</text>
  </g>

  <!-- Legend (compact, no arrow/flow label) -->
  <g>
    <rect x="332" y="488" rx="8" ry="8" width="316" height="56" fill="#0b1220" stroke="#253246" stroke-width="1"/>
    <rect x="346" y="502" width="18" height="14" rx="4" ry="4" fill="#1e2a3c" stroke="#253246" stroke-width="1"/>
    <text x="370" y="513" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">Deterministic</text>
    <rect x="456" y="502" width="18" height="14" rx="4" ry="4" fill="#2b2a5a" stroke="#253246" stroke-width="1"/>
    <text x="480" y="513" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">LLM/Agent</text>
    <rect x="566" y="502" width="18" height="14" rx="4" ry="4" fill="#0f4d3f" stroke="#253246" stroke-width="1"/>
    <text x="590" y="513" font-family="Inter,system-ui,Segoe UI,Arial" font-size="13" fill="#c6d3ee">Human Gate</text>
  </g>
</svg>
